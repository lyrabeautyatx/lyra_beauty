<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login - Lyra Beauty</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body class="gold-bg">
  <div class="container">
    <h2>Login</h2>
    <% if (error) { %>
      <p class="error"><%= error %></p>
    <% } %>
    
    <!-- Google OAuth Login -->
    <div class="oauth-section">
      <a href="/auth/google" class="btn google-btn" id="google-signin">
        <svg width="18" height="18" viewBox="0 0 18 18" style="margin-right: 8px;">
          <path fill="#4285f4" d="M17.64 9.2c0-.64-.06-1.26-.16-1.84H9v3.48h4.84a4.14 4.14 0 0 1-1.8 2.72v2.26h2.92c1.7-1.56 2.68-3.86 2.68-6.62z"/>
          <path fill="#34a853" d="M9 18c2.43 0 4.47-.8 5.96-2.18l-2.92-2.26a5.41 5.41 0 0 1-8.09-2.85h-3v2.33A9 9 0 0 0 9 18z"/>
          <path fill="#fbbc05" d="M3.96 10.71a5.41 5.41 0 0 1 0-3.42V4.96h-3a9 9 0 0 0 0 8.08l3-2.33z"/>
          <path fill="#ea4335" d="M9 3.58c1.32 0 2.5.45 3.44 1.34l2.58-2.58A9 9 0 0 0 .96 4.96l3 2.33A5.36 5.36 0 0 1 9 3.58z"/>
        </svg>
        Sign in with Google
      </a>
      <p class="oauth-note" id="oauth-status">Google Sign-In available</p>
    </div>
    
    <div class="divider">
      <hr><span>or</span><hr>
    </div>
    
    <!-- Legacy Login Form -->
    <div class="legacy-login">
      <form method="POST" action="/login">
        <input type="text" name="username" placeholder="Username" required><br>
        <input type="password" name="password" placeholder="Password" required><br>
        <button type="submit">Login with Username</button>
      </form>
      <p class="legacy-note">Note: Username/password login is for development. Use Google Sign-In for production.</p>
    </div>
  </div>

  <script>
    // Check if OAuth is configured
    fetch('/auth/status')
      .then(response => response.json())
      .then(data => {
        if (!data.oauthAvailable) {
          document.getElementById('google-signin').style.display = 'none';
          document.getElementById('oauth-status').textContent = 'Google OAuth not configured. Using legacy login.';
          document.getElementById('oauth-status').style.color = '#f39c12';
        }
      })
      .catch(() => {
        // OAuth status check failed, hide Google button
        document.getElementById('google-signin').style.display = 'none';
        document.getElementById('oauth-status').textContent = 'Google OAuth not available. Using legacy login.';
        document.getElementById('oauth-status').style.color = '#f39c12';
      });
  </script>
</body>
</html>
